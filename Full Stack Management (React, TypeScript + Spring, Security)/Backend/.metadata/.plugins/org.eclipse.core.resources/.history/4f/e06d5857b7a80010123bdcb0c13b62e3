package com.nt.controler;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.nt.entity.Student;
import com.nt.service.IStudentMgmtService;

@RestController
@RequestMapping("/students") 
@CrossOrigin(origins = "http://localhost:5173")
public class StudentControler {
    @Autowired
    private IStudentMgmtService service;

    // ✅ Add a new student
    @PostMapping("/add")
    public ResponseEntity<Student> addStudent(@RequestBody Student student) {
        Student savedStudent = service.addStudent(student);
        return ResponseEntity.ok(savedStudent);
    }

    // ✅ Retrieve all students
    @GetMapping("/all")
    public ResponseEntity<List<Student>> getAllStudents() {
        List<Student> list = service.getAllStudents();
        return ResponseEntity.ok(list);
    }
    
    // ✅ Search by name
    @GetMapping("/search/name/{name}")
    public ResponseEntity<List<Student>> getByName(@PathVariable String name) {
        return ResponseEntity.ok(service.getRecordByName(name));
    }

    // ✅ Search by email
    @GetMapping("/search/email/{email}")
    public ResponseEntity<List<Student>> getByEmail(@PathVariable String email) {
        return ResponseEntity.ok(service.getRecordByEmail(email));
    }

    // ✅ Search by mobile
    @GetMapping("/search/mobile/{mob}")
    public ResponseEntity<List<Student>> getByMobile(@PathVariable Integer mob) {
        return ResponseEntity.ok(service.getRecordByMobile(mob));
    }

    // ✅ Search by country
    @GetMapping("/search/country/{country}")
    public ResponseEntity<List<Student>> getByCountry(@PathVariable String country) {
        return ResponseEntity.ok(service.getRecordByCountry(country));
    }

    // ✅ Search by state
    @GetMapping("/search/state/{state}")
    public ResponseEntity<List<Student>> getByState(@PathVariable String state) {
        return ResponseEntity.ok(service.getRecordByState(state));
    }

    // ✅ Search by district
    @GetMapping("/search/district/{district}")
    public ResponseEntity<List<Student>> getByDistrict(@PathVariable String district) {
        return ResponseEntity.ok(service.getRecordByDistrict(district));
    }
}
